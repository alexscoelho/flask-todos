<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Todo App</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="static/js/index.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <link rel="stylesheet" href="{{url_for('static', filename='css/styles.css')}}"></link>
  </head>
  <body>
    <nav class="navbar navbar-light bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Todo App</a>
            <a href="/logout" class="btn btn-danger btn-sm ">Logout</a>
        </div>
    </nav>
    <main class="container p-4">
        
        <div class="row">
            <div class="col-md-4 offset-md-4 my-auto">
                <div class="card">
                    <div class="card-header">
                        <form action="/todo" method="POST" >
                        <div class="form-group">
                            <input type="text" name="name" id="task-name" placeholder="Todo" class="form-control " autoFocus="true">
                            <input type="date" name="due_date" id="due-date" class="form-control mt-2" >
                        </div>
                            <button type="submit" class="btn btn-primary add-todo mt-2 btn-sm">Add Task</button>
                        </form>
                        <button class="btn btn-warning mt-2" id="edit">Edit Task</button>

                    </div>
                    <div class="card-body">
                    <ul class="list-group">
                        {% for todo in all_todos %}
                           <li class="list-group-item todo" >
                            <span class=" {% if todo.completed %} done {% endif %}">{{todo.name}}</span/>
                            <div class="float-end">
                                <a href="/done/{{todo.id}}" class="btn btn-success btn-sm ">Done</a>
                                <a href="/delete/{{todo.id}}" class="btn btn-danger btn-sm ">Delete</a>
                            </div>
                                <p class="due-date">Due Date: {{todo.due_date.strftime("%b %d")}}</p>
                                <div class="dropdown">
                                    <button class="btn btn-secondary dropdown-toggle btn-sm " 
                                    type="button" id="dropdownMenuButton1" 
                                    data-bs-toggle="dropdown" 
                                    aria-expanded="false">
                                        Otions
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                                        <li><a class="dropdown-item" href="/sort">Sort</a></li>
                                        <li><a class="dropdown-item edit" data-id="{{todo.id}}" data-name="{{todo.name}}" href="#">Edit</a></li>
                                    </ul>
                                </div>
                           </li> 
                        {% endfor %}
                    </ul>
                    </div>
                </div>            
            </div>
        </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
  </body>
</html>